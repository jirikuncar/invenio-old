{% extends "workflows/hp_layout.html" %}
{% import 'workflows/hp_utils.html' as utils %}

{% block header%}
    {{ super() }}
    {% css url_for('static', filename='css/ColVis.css') %}
    {% css url_for('static', filename='css/dataTables.bootstrap.css') %}
{% endblock header %}

{% js url_for('static', filename='js/jquery.dataTables.min.js'), '30-datatables' %}
{% js url_for('static', filename='js/ColVis.js'), '30-datatables' %}
{% js url_for('static', filename='js/dataTables.bootstrap.js'), '30-datatables' %}
{% js url_for('workflows.static', filename='js/workflows/hp_maintable.js'), '50-workflows' %}
{% js url_for('workflows.static', filename='js/workflows/widgets/approval.js'), '50-workflows' %}
{% js url_for('static', filename='js/mustache.js'), '30-datatables' %}

{% block javascript %}
    {{ super() }}

    <script type="text/javascript">
        $(document).ready(function(){
            url = new Object();
            url.load_table = "{{ url_for('holdingpen.load_table')|safe }}";
            url.batch_widget = "{{ url_for('holdingpen.batch_widget') }}";
            url.resolve_widget = "{{ url_for('holdingpen.resolve_widget') }}";
            url.delete_single = "{{ url_for('holdingpen.delete_from_db') }}";
            url.refresh = "{{ url_for('holdingpen.refresh') }}";
            url.widget = "{{ url_for('holdingpen.show_widget') }}";
            url.details = "{{ url_for('holdingpen.details')|safe }}";
            url.batch_widget = "{{ url_for('holdingpen.batch_widget') }}";

            init_urls(url);
            init_urls_approval(url);
        });
    </script>
{% endblock javascript %}

{% block hpbody %}
    <div id="alert-message"></div>

    <h1 id="mainheader"></h1>

    <div class="row">
        <div class="col-md-5 col-md-pull-left">
            <ul class="nav nav-pills">
                <li class="active">
                    <a href="#">Home</a>
                </li>
                <li><a href="#">Assigned to me</a></li>
                <li class="dropdown">
                    <a class="dropdown-toggle"
                    data-toggle="dropdown"
                    href="#">
                        Pending Tasks
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                    {% set i = 0 %}
                    {% for task in widget_list.iterkeys() %}
                        <li><a id="task{{i}}" class="task-btn" tabindex="-1" name="{{task}}">{{task}}: {{widget_list[task][0]}}</a></li>
                        {% set i = i+1 %}
                    {% endfor %}
                    </ul>
                </li>
            </ul>
        </div>
        <div id="multi-approval" class="col-md-3 col-md-pull-left">
        </div>

        <div class=" col-md-2 btn-group">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                Records Showing <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" role="menu">
                <li><input id="version_halted" class="version_selection" type="checkbox"> <span class="label label-warning">Halted</span></li>
                <li><input id="version_final" class="version_selection" type="checkbox"> <span class="label label-success">Final</span></li>
                <li><input id="version_running" class="version_selection" type="checkbox"> <span class="label label-info">Running</span></li>
            </ul>
        </div>

        <div class="col-md-1 col-md-pull-right">
            <button id="refresh_button" class="btn btn-primary">Refresh!</button>
        </div>
        <!-- <div class="col-md-1 col-md-pull-right">
            <a id="batch_btn" class="btn btn-info col-md-pull-right" href="#"><i class="icon-wrenchwhite icon-wrench"></i>Group Widget</a>
        </div>        --> 
    </div>
    <div class="tag-area row">
    </div>

    <div class="container">
        <div class="row">
            <table id="example" cellpadding="0" cellspacing="0" border="0" class="table table-bordered">
                <thead>
                    <tr>
                        <th>Select</th>
                        <th>Id</th>
                        <th>Title</th>
                        <th>Source</th>
                        <th>Category</th>
                        <th>Workflow ID</th>
                        <th>Owner</th>
                        <th>Created</th>
                        <th>Version</th>
                        <th>Details</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}